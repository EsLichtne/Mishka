import{checkValidity}from"./validation.js";const form=document.querySelector(".form__order"),button=document.querySelector(".form__button"),messageTemplate=document.querySelector("#success-message"),message=messageTemplate.content.querySelector(".message").cloneNode(!0),messageButton=message.querySelector(".message__button"),setButtonDisabled=e=>{button.disabled=e,button.textContent=e?"Отправляю...":"Отправить заказ"},clearField=()=>{form.querySelectorAll("input").forEach((e=>{e.value=""})),form.querySelector("textarea").value="",form.querySelectorAll(".radio-input")[0].checked=!0,form.querySelectorAll(".checkbox-input").forEach((e=>{e.checked=!1}))},onButtonClick=e=>{e.preventDefault(),checkValidity()&&(setButtonDisabled(!0),setTimeout((()=>{document.body.appendChild(message)}),2e3))},clearForm=()=>{message.remove(),form.querySelectorAll("input").forEach((e=>{e.value=""})),form.querySelector("textarea").value="",form.querySelectorAll(".radio-input")[0].checked=!0,form.querySelectorAll(".checkbox-input").forEach((e=>{e.checked=!1})),setButtonDisabled(!1)},onMessageClick=e=>{e.target!==messageButton&&e.target!==message||clearForm()},onDocumentKeydown=e=>{e.key.startsWith("Esc")&&clearForm()};button.addEventListener("click",onButtonClick),message.addEventListener("click",onMessageClick),document.addEventListener("keydown",onDocumentKeydown);